# 📱 SenseAI - Complete Application Flow Structure

## Full System Architecture & Navigation Flow

---

## 🚀 Application Startup Flow

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                           APP LAUNCH                                         │
│                         (main.dart)                                          │
└─────────────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                        INITIALIZATION                                        │
│  • WidgetsFlutterBinding.ensureInitialized()                                │
│  • OfflineSyncService.init()                                                │
│  • OfflineSyncService.startSyncLoop()                                       │
│  • StorageService.database (SQLite init)                                    │
└─────────────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                      SPLASH SCREEN (4 seconds)                               │
│  • Animated SenseAI logo                                                     │
│  • "Multi-Sensory Behavioral Autism Detection System"                       │
│  • Loading progress indicator                                                │
│  • Particle animations                                                       │
└─────────────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
                        ┌───────────────────┐
                        │ Check Registration │
                        │    Status          │
                        └─────────┬─────────┘
                                  │
                    ┌─────────────┴─────────────┐
                    │                           │
                    ▼                           ▼
        ┌───────────────────┐       ┌───────────────────┐
        │  NOT REGISTERED   │       │    REGISTERED     │
        │                   │       │                   │
        │  Show REGISTER    │       │   Show LOGIN      │
        │     Form          │       │     Form          │
        └─────────┬─────────┘       └─────────┬─────────┘
                  │                           │
                  ▼                           ▼
        ┌───────────────────┐       ┌───────────────────┐
        │ Enter:            │       │ Enter:            │
        │ • Full Name       │       │ • 4-digit PIN     │
        │ • Hospital Name   │       │                   │
        │ • Create PIN      │       │                   │
        │ • Confirm PIN     │       │                   │
        └─────────┬─────────┘       └─────────┬─────────┘
                  │                           │
                  └───────────┬───────────────┘
                              │
                              ▼
                  ┌───────────────────────┐
                  │    MAIN DASHBOARD     │
                  │   (dashboard_screen)  │
                  └───────────────────────┘
```

---

## 🏠 Main Dashboard Structure

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                           MAIN DASHBOARD                                     │
│                      (dashboard_screen.dart)                                 │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  ┌────────────────────────────────────────────────────────────────────────┐ │
│  │                        WELCOME CARD                                     │ │
│  │  👋 Welcome back, [Clinician Name]                                     │ │
│  │  🏥 [Hospital Name]                                                     │ │
│  │  📅 [Current Date]                                                      │ │
│  └────────────────────────────────────────────────────────────────────────┘ │
│                                                                              │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │                    ASSESSMENT COMPONENTS (4 Tiles)                   │    │
│  │                                                                      │    │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐ │    │
│  │  │  Cognitive  │  │    RRB      │  │  Auditory   │  │   Visual    │ │    │
│  │  │ Flexibility │  │ (Coming    │  │  Checking   │  │  Checking   │ │    │
│  │  │  & Rule     │  │   Soon)    │  │  (Coming    │  │  (Coming    │ │    │
│  │  │  Switching  │  │            │  │   Soon)     │  │   Soon)     │ │    │
│  │  │    ✅       │  │    🔜      │  │    🔜       │  │    🔜       │ │    │
│  │  └──────┬──────┘  └────────────┘  └─────────────┘  └─────────────┘ │    │
│  │         │                                                           │    │
│  └─────────┼───────────────────────────────────────────────────────────┘    │
│            │                                                                 │
│            ▼ Navigate to Cognitive Dashboard                                │
│                                                                              │
│  ┌────────────────────────────────────────────────────────────────────────┐ │
│  │                     PILOT STUDY PROGRESS                                │ │
│  │                                                                         │ │
│  │  ASD Group:     [██████████░░░░░░░░░░] 25/50 children                  │ │
│  │  Control Group: [████████████░░░░░░░░] 35/60 children                  │ │
│  │                                                                         │ │
│  └────────────────────────────────────────────────────────────────────────┘ │
│                                                                              │
│  ┌────────────────────────────────────────────────────────────────────────┐ │
│  │                      STATISTICS CARDS                                   │ │
│  │                                                                         │ │
│  │  ┌────────────┐  ┌────────────┐  ┌────────────┐  ┌────────────┐       │ │
│  │  │   Total    │  │ Completed  │  │  Pending   │  │   Today    │       │ │
│  │  │  Children  │  │Assessments │  │Assessments │  │Assessments │       │ │
│  │  │    60      │  │    45      │  │     15     │  │     3      │       │ │
│  │  └────────────┘  └────────────┘  └────────────┘  └────────────┘       │ │
│  │                                                                         │ │
│  └────────────────────────────────────────────────────────────────────────┘ │
│                                                                              │
│  ┌────────────────────────────────────────────────────────────────────────┐ │
│  │                       QUICK ACTIONS                                     │ │
│  │                                                                         │ │
│  │  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐        │ │
│  │  │   ➕ Add New    │  │  👁️ View All    │  │  📊 View        │        │ │
│  │  │     Child       │  │    Children     │  │    Reports      │        │ │
│  │  └────────┬────────┘  └────────┬────────┘  └─────────────────┘        │ │
│  │           │                    │                                       │ │
│  └───────────┼────────────────────┼───────────────────────────────────────┘ │
│              │                    │                                          │
│              ▼                    ▼                                          │
│     Add Child Screen      Child List Screen                                  │
│                                                                              │
│  ┌────────────────────────────────────────────────────────────────────────┐ │
│  │                       RECENT CHILDREN                                   │ │
│  │                                                                         │ │
│  │  • LRH-027 | ASD Level 2 | 5y 8m | ✅ Completed                        │ │
│  │  • PRE-089 | Control     | 4y 2m | ⏳ Pending                          │ │
│  │  • LRH-028 | ASD Level 1 | 6y 1m | ✅ Completed                        │ │
│  │  • PRE-090 | Control     | 3y 9m | ⏳ Pending                          │ │
│  │  • LRH-029 | ASD Level 3 | 5y 3m | ✅ Completed                        │ │
│  │                                                                         │ │
│  └────────────────────────────────────────────────────────────────────────┘ │
│                                                                              │
│  ┌────────────────────────────────────────────────────────────────────────┐ │
│  │                     SYSTEM INFORMATION                                  │ │
│  │  Version: 1.0.0  |  Mode: Pilot Mode  |  Status: Offline-First         │ │
│  └────────────────────────────────────────────────────────────────────────┘ │
│                                                                              │
├─────────────────────────────────────────────────────────────────────────────┤
│  [⚙️ Settings]                                              [🚪 Logout]     │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 🧠 Cognitive Flexibility Module Flow

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                    COGNITIVE DASHBOARD SCREEN                                │
│                  (cognitive_dashboard_screen.dart)                           │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  ┌────────────────────────────────────────────────────────────────────────┐ │
│  │  AppBar: "Cognitive Flexibility & Rule Switching"                      │ │
│  │  [🌐 Language Selector]  [🔄 Refresh]                                  │ │
│  └────────────────────────────────────────────────────────────────────────┘ │
│                                                                              │
│  ┌────────────────────────────────────────────────────────────────────────┐ │
│  │                    STATISTICS OVERVIEW                                  │ │
│  │  ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐                  │ │
│  │  │ Children │ │Completed │ │ Pending  │ │  Today   │                  │ │
│  │  │    60    │ │    45    │ │    15    │ │    3     │                  │ │
│  │  └──────────┘ └──────────┘ └──────────┘ └──────────┘                  │ │
│  └────────────────────────────────────────────────────────────────────────┘ │
│                                                                              │
│  ┌────────────────────────────────────────────────────────────────────────┐ │
│  │                      ACTION BUTTONS                                     │ │
│  │                                                                         │ │
│  │  ┌─────────────────────────────────────────────────────────────────┐   │ │
│  │  │              ➕ ADD NEW CHILD                                    │   │ │
│  │  └─────────────────────────────────────────────────────────────────┘   │ │
│  │                           │                                             │ │
│  │                           ▼                                             │ │
│  │               Navigate to Add Child Screen                              │ │
│  │                                                                         │ │
│  │  ┌─────────────────────────────────────────────────────────────────┐   │ │
│  │  │              📋 VIEW ALL CHILDREN                                │   │ │
│  │  └─────────────────────────────────────────────────────────────────┘   │ │
│  │                           │                                             │ │
│  │                           ▼                                             │ │
│  │               Navigate to Child List Screen                             │ │
│  │                                                                         │ │
│  │  ┌─────────────────────────────────────────────────────────────────┐   │ │
│  │  │              🎮 START ASSESSMENT                                 │   │ │
│  │  └─────────────────────────────────────────────────────────────────┘   │ │
│  │                           │                                             │ │
│  │                           ▼                                             │ │
│  │               Navigate to Age Select Screen                             │ │
│  │                                                                         │ │
│  └────────────────────────────────────────────────────────────────────────┘ │
│                                                                              │
│  ┌────────────────────────────────────────────────────────────────────────┐ │
│  │                    RECENT CHILDREN LIST                                 │ │
│  │                                                                         │ │
│  │  [🔍 Search: _______________]                                          │ │
│  │                                                                         │ │
│  │  ┌──────────────────────────────────────────────────────────────────┐  │ │
│  │  │ 👶 LRH-027 | Male | 5y 8m | ASD Level 2 | ✅ Completed           │  │ │
│  │  │    Last: Color-Shape Game | 2 days ago                            │  │ │
│  │  └──────────────────────────────────────────────────────────────────┘  │ │
│  │                                                                         │ │
│  │  ┌──────────────────────────────────────────────────────────────────┐  │ │
│  │  │ 👶 PRE-089 | Female | 4y 2m | Control | ⏳ Pending               │  │ │
│  │  │    No assessments yet                                             │  │ │
│  │  └──────────────────────────────────────────────────────────────────┘  │ │
│  │                           │                                             │ │
│  │                           ▼ Tap to view details                        │ │
│  └────────────────────────────────────────────────────────────────────────┘ │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 👶 Add Child Flow (Child Profile Screen)

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                        ADD CHILD SCREEN                                      │
│                      (add_child_screen.dart)                                 │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  AppBar: "Child Profile"                                                     │
│                                                                              │
│  ┌────────────────────────────────────────────────────────────────────────┐ │
│  │                      STUDY GROUP SELECTOR                               │ │
│  │                                                                         │ │
│  │    ┌─────────────────────┐    ┌─────────────────────┐                  │ │
│  │    │  🧩 ASD GROUP       │    │  👶 CONTROL GROUP   │                  │ │
│  │    │  (Clinical Cases)   │    │  (Typically Dev.)   │                  │ │
│  │    │       [BLUE]        │    │       [GREEN]       │                  │ │
│  │    └─────────┬───────────┘    └─────────┬───────────┘                  │ │
│  │              │                          │                               │ │
│  └──────────────┼──────────────────────────┼───────────────────────────────┘ │
│                 │                          │                                  │
│                 ▼                          ▼                                  │
│  ┌─────────────────────────┐  ┌─────────────────────────┐                   │
│  │   ASD GROUP FORM        │  │  CONTROL GROUP FORM     │                   │
│  │                         │  │                         │                   │
│  │  • Child Code (LRH-xxx) │  │  • Child Code (PRE-xxx) │                   │
│  │  • Full Name            │  │  • Full Name            │                   │
│  │  • Date of Birth        │  │  • Date of Birth        │                   │
│  │  • Gender (M/F/O)       │  │  • Gender (M/F/O)       │                   │
│  │  • Language (EN/SI/TA)  │  │  • Language (EN/SI/TA)  │                   │
│  │  ─────────────────────  │  │  ─────────────────────  │                   │
│  │  • ASD Level (1/2/3)    │  │  (No ASD Level)         │                   │
│  │  • Clinician ID (5-dig) │  │  (No Clinician)         │                   │
│  │  • Hospital (Auto-fill) │  │  • Source: "Preschool"  │                   │
│  │                         │  │                         │                   │
│  └───────────┬─────────────┘  └───────────┬─────────────┘                   │
│              │                            │                                  │
│              └────────────┬───────────────┘                                  │
│                           │                                                  │
│                           ▼                                                  │
│              ┌─────────────────────────────┐                                │
│              │      💾 SAVE CHILD          │                                │
│              └─────────────┬───────────────┘                                │
│                            │                                                 │
│                            ▼                                                 │
│              ┌─────────────────────────────┐                                │
│              │  Save to SQLite (Local)     │                                │
│              │  Sync to Firebase (Cloud)   │                                │
│              │  Return to Previous Screen  │                                │
│              └─────────────────────────────┘                                │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 🎯 Age-Based Assessment Selection

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                        AGE SELECT SCREEN                                     │
│                      (age_select_screen.dart)                                │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  AppBar: "Select Age Group"                                                  │
│                                                                              │
│  ┌────────────────────────────────────────────────────────────────────────┐ │
│  │                   "Choose the child's age group"                        │ │
│  └────────────────────────────────────────────────────────────────────────┘ │
│                                                                              │
│  ┌────────────────────────────────────────────────────────────────────────┐ │
│  │                                                                         │ │
│  │  ┌─────────────────────────────────────────────────────────────────┐   │ │
│  │  │                    👶 AGE 2-3 YEARS                              │   │ │
│  │  │                                                                  │   │ │
│  │  │  Assessment Type:                                                │   │ │
│  │  │  • 📋 Parental Questionnaire (AI Doctor Bot)                    │   │ │
│  │  │  • ✍️ Clinical Reflection (2-3 version)                         │   │ │
│  │  │                                                                  │   │ │
│  │  │  Scientific Basis: M-CHAT-R/F standard questionnaire            │   │ │
│  │  │                                                                  │   │ │
│  │  └─────────────────────────────────────────────────────────────────┘   │ │
│  │                              │                                          │ │
│  │                              ▼                                          │ │
│  │                    AI Doctor Bot Screen                                 │ │
│  │                                                                         │ │
│  │  ┌─────────────────────────────────────────────────────────────────┐   │ │
│  │  │                   🐸 AGE 3.5-5 YEARS                             │   │ │
│  │  │                                                                  │   │ │
│  │  │  Assessment Type:                                                │   │ │
│  │  │  • 🎮 Frog Jump Game (Inhibitory Control)                       │   │ │
│  │  │  • ✍️ Clinical Reflection                                        │   │ │
│  │  │                                                                  │   │ │
│  │  │  Scientific Basis: Go/No-Go paradigm                            │   │ │
│  │  │                                                                  │   │ │
│  │  └─────────────────────────────────────────────────────────────────┘   │ │
│  │                              │                                          │ │
│  │                              ▼                                          │ │
│  │                    Frog Jump Game Screen                                │ │
│  │                                                                         │ │
│  │  ┌─────────────────────────────────────────────────────────────────┐   │ │
│  │  │                 🎨 AGE 5.5-6+ YEARS                              │   │ │
│  │  │                                                                  │   │ │
│  │  │  Assessment Type:                                                │   │ │
│  │  │  • 🎮 Color-Shape Game (DCCS)                                   │   │ │
│  │  │  • ✍️ Clinical Reflection                                        │   │ │
│  │  │                                                                  │   │ │
│  │  │  Scientific Basis: Dimensional Change Card Sort (DCCS)          │   │ │
│  │  │  Key ASD Markers: Perseverative errors, Switch cost             │   │ │
│  │  │                                                                  │   │ │
│  │  └─────────────────────────────────────────────────────────────────┘   │ │
│  │                              │                                          │ │
│  │                              ▼                                          │ │
│  │                    Color-Shape Game Screen                              │ │
│  │                                                                         │ │
│  └────────────────────────────────────────────────────────────────────────┘ │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 🎮 Color-Shape Game (DCCS) Flow

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                      COLOR-SHAPE GAME FLOW                                   │
│                   (color_shape_game_screen.dart)                             │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  STEP 1: LANGUAGE SELECTION                                                  │
│  ┌────────────────────────────────────────────────────────────────────────┐ │
│  │                    🌐 SELECT LANGUAGE                                   │ │
│  │                                                                         │ │
│  │  ┌─────────────────┐                                                   │ │
│  │  │ 🇬🇧 English     │                                                   │ │
│  │  └─────────────────┘                                                   │ │
│  │  ┌─────────────────┐                                                   │ │
│  │  │ 🇱🇰 සිංහල       │                                                   │ │
│  │  └─────────────────┘                                                   │ │
│  │  ┌─────────────────┐                                                   │ │
│  │  │ 🇮🇳 தமிழ்        │                                                   │ │
│  │  └─────────────────┘                                                   │ │
│  │                                                                         │ │
│  └────────────────────────────────────────────────────────────────────────┘ │
│                              │                                               │
│                              ▼                                               │
│  STEP 2: INSTRUCTIONS SCREEN                                                 │
│  ┌────────────────────────────────────────────────────────────────────────┐ │
│  │                    📖 GAME INSTRUCTIONS                                 │ │
│  │                                                                         │ │
│  │         [🔴 Red Circle]        [🔵 Blue Square]                        │ │
│  │            LEFT                    RIGHT                                │ │
│  │                                                                         │ │
│  │  "First we play the COLOR game:                                        │ │
│  │   Put the card where the COLOR matches."                               │ │
│  │                                                                         │ │
│  │  "Then we play the SHAPE game:                                         │ │
│  │   Put the card where the SHAPE matches."                               │ │
│  │                                                                         │ │
│  │  [🔊 Listen]        [▶️ START GAME]                                    │ │
│  │                                                                         │ │
│  └────────────────────────────────────────────────────────────────────────┘ │
│                              │                                               │
│                              ▼                                               │
│  STEP 3: GAME PHASES                                                         │
│  ┌────────────────────────────────────────────────────────────────────────┐ │
│  │                                                                         │ │
│  │  PHASE 1: PRACTICE (4 trials)                                          │ │
│  │  ┌──────────────────────────────────────────────────────────────────┐  │ │
│  │  │ Rule: COLOR                                                       │  │ │
│  │  │ Purpose: Familiarization                                          │  │ │
│  │  │ Voice: "Let's practice first..."                                  │  │ │
│  │  └──────────────────────────────────────────────────────────────────┘  │ │
│  │                              │                                          │ │
│  │                              ▼                                          │ │
│  │  PHASE 2: PRE-SWITCH (8 trials)                                        │ │
│  │  ┌──────────────────────────────────────────────────────────────────┐  │ │
│  │  │ Rule: COLOR                                                       │  │ │
│  │  │ Purpose: Baseline measurement                                     │  │ │
│  │  │ Voice: "Color game starting!"                                     │  │ │
│  │  │ Metrics: Accuracy, Reaction Time (baseline)                       │  │ │
│  │  └──────────────────────────────────────────────────────────────────┘  │ │
│  │                              │                                          │ │
│  │                              ▼                                          │ │
│  │  PHASE 3: POST-SWITCH (12 trials) ⚠️ KEY ASD MARKER                    │ │
│  │  ┌──────────────────────────────────────────────────────────────────┐  │ │
│  │  │ Rule: SHAPE (RULE CHANGES!)                                       │  │ │
│  │  │ Purpose: Measure cognitive flexibility                            │  │ │
│  │  │ Voice: "Now the shape game! Look at the shape!"                   │  │ │
│  │  │ Metrics: Post-switch accuracy, Perseverative errors               │  │ │
│  │  │                                                                   │  │ │
│  │  │ ⚠️ ASD children often keep using the COLOR rule here!            │  │ │
│  │  └──────────────────────────────────────────────────────────────────┘  │ │
│  │                              │                                          │ │
│  │                              ▼                                          │ │
│  │  PHASE 4: MIXED (8 trials)                                             │ │
│  │  ┌──────────────────────────────────────────────────────────────────┐  │ │
│  │  │ Rule: RANDOM (Color OR Shape each trial)                          │  │ │
│  │  │ Purpose: Advanced flexibility testing                             │  │ │
│  │  │ Voice: "Now the mixed game! Watch carefully!"                     │  │ │
│  │  │ Metrics: Switch cost, Mixed accuracy                              │  │ │
│  │  └──────────────────────────────────────────────────────────────────┘  │ │
│  │                                                                         │ │
│  └────────────────────────────────────────────────────────────────────────┘ │
│                              │                                               │
│                              ▼                                               │
│  STEP 4: GAME INTERFACE                                                      │
│  ┌────────────────────────────────────────────────────────────────────────┐ │
│  │  Header: [X Close]  "DCCS Game"  [⏱️ 4:32]                             │ │
│  │                                                                         │ │
│  │  Progress: Trial 15 of 32 ████████████░░░░░░ 47%                       │ │
│  │                                                                         │ │
│  │  ┌─────────────────────────────────────────────────────────────────┐   │ │
│  │  │                  🎨 COLOR GAME                                   │   │ │
│  │  │              (or 🔷 SHAPE GAME)                                  │   │ │
│  │  └─────────────────────────────────────────────────────────────────┘   │ │
│  │                                                                         │ │
│  │  ┌──────────────┐              ┌──────────────┐                        │ │
│  │  │    LEFT      │              │    RIGHT     │                        │ │
│  │  │              │              │              │                        │ │
│  │  │    🔴        │              │    🔵        │                        │ │
│  │  │   Circle     │              │   Square     │                        │ │
│  │  │              │              │              │                        │ │
│  │  │  Red Circle  │              │ Blue Square  │                        │ │
│  │  └──────────────┘              └──────────────┘                        │ │
│  │                                                                         │ │
│  │              ┌──────────────────────────┐                              │ │
│  │              │   TAP THE MATCHING BOX    │                              │ │
│  │              │                          │                              │ │
│  │              │      🔴 RED SQUARE       │  ← Stimulus Card             │ │
│  │              │                          │                              │ │
│  │              └──────────────────────────┘                              │ │
│  │                                                                         │ │
│  │  Feedback: ✓ Correct! (or ✗ Try the next one)                         │ │
│  │                                                                         │ │
│  │  Phase: "Color Game Phase" (or Shape/Mixed)                            │ │
│  │                                                                         │ │
│  └────────────────────────────────────────────────────────────────────────┘ │
│                              │                                               │
│                              ▼                                               │
│  STEP 5: GAME COMPLETE → REFLECTION SCREEN                                   │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 📊 Clinical Reflection & Results Flow

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                     CLINICAL REFLECTION SCREEN                               │
│                      (reflection_screen.dart)                                │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  ┌────────────────────────────────────────────────────────────────────────┐ │
│  │                    GAME RESULTS SUMMARY                                 │ │
│  │                                                                         │ │
│  │  Total Trials: 32        Correct: 24        Accuracy: 75%              │ │
│  │  Avg Reaction Time: 1350ms    Switch Cost: 450ms                       │ │
│  │  Perseverative Errors: 5                                                │ │
│  │                                                                         │ │
│  └────────────────────────────────────────────────────────────────────────┘ │
│                                                                              │
│  ┌────────────────────────────────────────────────────────────────────────┐ │
│  │                  CLINICIAN OBSERVATIONS                                 │ │
│  │                                                                         │ │
│  │  Q1: Did the child understand the instructions?                        │ │
│  │      ○ Yes, immediately   ○ After repetition   ○ With difficulty       │ │
│  │                                                                         │ │
│  │  Q2: How was the child's attention during the game?                    │ │
│  │      ○ Focused throughout  ○ Sometimes distracted  ○ Very distracted   │ │
│  │                                                                         │ │
│  │  Q3: Did the child show frustration during rule changes?               │ │
│  │      ○ No frustration   ○ Mild frustration   ○ Significant frustration │ │
│  │                                                                         │ │
│  │  Q4: Did the child show repetitive behaviors during the game?          │ │
│  │      ○ None observed    ○ Occasional         ○ Frequent                │ │
│  │                                                                         │ │
│  │  Q5: Additional clinical notes:                                        │ │
│  │      [____________________________________________]                     │ │
│  │                                                                         │ │
│  └────────────────────────────────────────────────────────────────────────┘ │
│                                                                              │
│              ┌─────────────────────────────────────┐                        │
│              │        📊 VIEW FULL RESULTS         │                        │
│              └─────────────────┬───────────────────┘                        │
│                                │                                             │
│                                ▼                                             │
│                         Result Screen                                        │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘


┌─────────────────────────────────────────────────────────────────────────────┐
│                          RESULT SCREEN                                       │
│                       (result_screen.dart)                                   │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  ┌────────────────────────────────────────────────────────────────────────┐ │
│  │                     RISK ASSESSMENT                                     │ │
│  │                                                                         │ │
│  │  ┌─────────────────────────────────────────────────────────────────┐   │ │
│  │  │                                                                  │   │ │
│  │  │     ASD Group:      Risk Level Based on Performance             │   │ │
│  │  │                     🔴 HIGH / 🟡 MODERATE / 🟢 LOW               │   │ │
│  │  │                                                                  │   │ │
│  │  │     Control Group:  Always shows "No ASD Concern" 🟢            │   │ │
│  │  │                                                                  │   │ │
│  │  └─────────────────────────────────────────────────────────────────┘   │ │
│  │                                                                         │ │
│  └────────────────────────────────────────────────────────────────────────┘ │
│                                                                              │
│  ┌────────────────────────────────────────────────────────────────────────┐ │
│  │                     ML FEATURES EXTRACTED                               │ │
│  │                                                                         │ │
│  │  • post_switch_accuracy: 75%                                           │ │
│  │  • total_perseverative_errors: 5                                       │ │
│  │  • switch_cost_ms: 450                                                 │ │
│  │  • perseverative_error_rate_post_switch: 41.7%                         │ │
│  │  • avg_rt_pre_switch_ms: 1200                                          │ │
│  │  • avg_rt_post_switch_correct_ms: 1650                                 │ │
│  │  • number_of_consecutive_perseverations: 3                             │ │
│  │  • total_rule_switch_errors: 8                                         │ │
│  │  • pre_switch_accuracy: 95%                                            │ │
│  │  • mixed_block_accuracy: 62.5%                                         │ │
│  │  • longest_streak_correct: 6                                           │ │
│  │  • avg_reaction_time_ms: 1350                                          │ │
│  │                                                                         │ │
│  └────────────────────────────────────────────────────────────────────────┘ │
│                                                                              │
│  ┌────────────────────────────────────────────────────────────────────────┐ │
│  │                      RECOMMENDATIONS                                    │ │
│  │                                                                         │ │
│  │  Based on the assessment results:                                       │ │
│  │  • Consider further clinical evaluation                                │ │
│  │  • Schedule follow-up assessment in 3 months                           │ │
│  │  • Recommend occupational therapy evaluation                           │ │
│  │                                                                         │ │
│  └────────────────────────────────────────────────────────────────────────┘ │
│                                                                              │
│  [📄 Export PDF]    [🏠 Back to Dashboard]                                  │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 🔄 Complete User Journey Map

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                      COMPLETE USER JOURNEY                                   │
└─────────────────────────────────────────────────────────────────────────────┘

    👤 ADMIN/CLINICIAN                           👶 CHILD
          │                                          │
          ▼                                          │
    ┌───────────┐                                    │
    │  App Open │                                    │
    └─────┬─────┘                                    │
          │                                          │
          ▼                                          │
    ┌───────────┐                                    │
    │  Splash   │                                    │
    │  Screen   │                                    │
    └─────┬─────┘                                    │
          │                                          │
          ▼                                          │
    ┌─────────────┐                                  │
    │   Login/    │                                  │
    │  Register   │                                  │
    └─────┬───────┘                                  │
          │                                          │
          ▼                                          │
    ┌───────────────┐                                │
    │    Main       │                                │
    │  Dashboard    │                                │
    └─────┬─────────┘                                │
          │                                          │
          ▼                                          │
    ┌───────────────┐                                │
    │   Cognitive   │                                │
    │  Dashboard    │                                │
    └─────┬─────────┘                                │
          │                                          │
    ┌─────┴─────┐                                    │
    │           │                                    │
    ▼           ▼                                    │
┌─────────┐ ┌─────────┐                              │
│Add Child│ │  Start  │                              │
│ Profile │ │Assessment│                             │
└────┬────┘ └────┬────┘                              │
     │           │                                   │
     │           ▼                                   │
     │     ┌───────────┐                             │
     │     │  Select   │                             │
     │     │ Age Group │                             │
     │     └─────┬─────┘                             │
     │           │                                   │
     │     ┌─────┴───────────────────────┐           │
     │     │             │               │           │
     │     ▼             ▼               ▼           │
     │ ┌────────┐  ┌──────────┐  ┌───────────┐      │
     │ │ 2-3 yr │  │ 3.5-5 yr │  │ 5.5-6+ yr │      │
     │ │  AI    │  │ Frog Jump│  │Color-Shape│      │
     │ │ Doctor │  │   Game   │  │   Game    │      │
     │ │  Bot   │  │          │  │  (DCCS)   │      │
     │ └───┬────┘  └────┬─────┘  └─────┬─────┘      │
     │     │            │              │            │
     │     │            │              │            │
     │     └────────────┴──────────────┘            │
     │                   │                          │
     │                   ▼                          │
     │         ┌─────────────────┐                  │
     │         │    Language     │◄─────────────────┤
     │         │    Selection    │    Child sees    │
     │         └────────┬────────┘    native lang   │
     │                  │                           │
     │                  ▼                           │
     │         ┌─────────────────┐                  │
     │         │  Instructions   │◄─────────────────┤
     │         │   + Voice TTS   │    Child hears   │
     │         └────────┬────────┘    instructions  │
     │                  │                           │
     │                  ▼                           │
     │         ┌─────────────────┐                  │
     │         │   GAME PLAY     │◄─────────────────┤
     │         │                 │    Child plays   │
     │         │  Practice (4)   │    game          │
     │         │  Pre-switch (8) │                  │
     │         │  Post-switch(12)│                  │
     │         │  Mixed (8)      │                  │
     │         │                 │                  │
     │         │  Voice feedback │                  │
     │         │  Sound effects  │                  │
     │         │  Animations     │                  │
     │         └────────┬────────┘                  │
     │                  │                           │
     │                  ▼                           │
     │         ┌─────────────────┐                  │
     │         │  Game Complete  │                  │
     │         │  "You did it!"  │◄─────────────────┘
     │         └────────┬────────┘
     │                  │
     │                  ▼
     │         ┌─────────────────┐
     │         │   Clinician     │◄── Admin completes
     │         │   Reflection    │    observation form
     │         └────────┬────────┘
     │                  │
     │                  ▼
     │         ┌─────────────────┐
     │         │    Results      │
     │         │    Screen       │
     │         │                 │
     │         │  • Risk Level   │
     │         │  • ML Features  │
     │         │  • Recommend.   │
     │         └────────┬────────┘
     │                  │
     │                  ▼
     │         ┌─────────────────┐
     │         │  Export PDF     │
     │         │  (Optional)     │
     │         └────────┬────────┘
     │                  │
     └──────────────────┴──────────────────────────►
                        │
                        ▼
              ┌─────────────────────┐
              │  Data Saved:        │
              │  • SQLite (Local)   │
              │  • Firebase (Cloud) │
              │  • Ready for ML     │
              └─────────────────────┘
```

---

## 📱 Screen Navigation Summary

| Screen | File | Entry Point | Navigates To |
|--------|------|-------------|--------------|
| Splash | `splash_screen.dart` | App Launch | Login |
| Login/Register | `login_screen.dart` | After Splash | Dashboard |
| Main Dashboard | `dashboard_screen.dart` | After Login | Cognitive Dashboard, Settings, Logout |
| Cognitive Dashboard | `cognitive_dashboard_screen.dart` | Dashboard Tile | Add Child, Child List, Age Select |
| Add Child | `add_child_screen.dart` | Quick Action | Back to Dashboard |
| Child List | `child_list_screen.dart` | Quick Action | Child Detail |
| Child Detail | `child_detail_screen.dart` | Child List Item | Assessment Start |
| Age Select | `age_select_screen.dart` | Start Assessment | AI Doctor Bot / Frog Jump / Color-Shape |
| AI Doctor Bot | `ai_doctor_bot_screen.dart` | Age 2-3 | Reflection (2-3) |
| Frog Jump Game | `frog_jump_game_screen.dart` | Age 3.5-5 | Reflection |
| Color-Shape Game | `color_shape_game_screen.dart` | Age 5.5-6+ | Reflection |
| Reflection | `reflection_screen.dart` | After Game | Result Screen |
| Reflection 2-3 | `reflection_screen_2_3.dart` | After AI Bot | Result Screen |
| Result Screen | `result_screen.dart` | After Reflection | Dashboard |
| Settings | `settings_screen.dart` | Dashboard | Backend Config |

---

## 🗃️ Data Storage Flow

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                         DATA STORAGE FLOW                                    │
└─────────────────────────────────────────────────────────────────────────────┘

         USER ACTION                    LOCAL                    CLOUD
              │                          │                         │
              ▼                          │                         │
     ┌─────────────────┐                 │                         │
     │  Add Child      │                 │                         │
     │  Play Game      │                 │                         │
     │  Save Results   │                 │                         │
     └────────┬────────┘                 │                         │
              │                          │                         │
              ▼                          ▼                         │
     ┌─────────────────────────────────────────┐                   │
     │            StorageService               │                   │
     │                                         │                   │
     │  • saveChild()                          │                   │
     │  • saveSession()                        │                   │
     │  • saveTrial()                          │                   │
     └────────────────┬────────────────────────┘                   │
                      │                                            │
                      ▼                                            │
     ┌─────────────────────────────────────────┐                   │
     │            SQLite Database              │                   │
     │           (senseai.db)                  │                   │
     │                                         │                   │
     │  Tables:                                │                   │
     │  • children                             │                   │
     │  • sessions                             │                   │
     │  • trials                               │                   │
     └────────────────┬────────────────────────┘                   │
                      │                                            │
                      │ (Automatic sync when online)               │
                      │                                            │
                      ▼                                            ▼
     ┌─────────────────────────────────────────────────────────────────┐
     │                    OfflineSyncService                           │
     │                                                                 │
     │  • Queues data when offline                                     │
     │  • Syncs automatically when connection restored                 │
     │  • Handles conflicts                                            │
     └─────────────────────────────────┬───────────────────────────────┘
                                       │
                                       ▼
     ┌─────────────────────────────────────────────────────────────────┐
     │                      ApiService                                  │
     │                                                                 │
     │  POST /api/children                                             │
     │  POST /api/sessions                                             │
     │  POST /api/trials                                               │
     └─────────────────────────────────┬───────────────────────────────┘
                                       │
                                       │ HTTP (REST)
                                       │
                                       ▼
     ┌─────────────────────────────────────────────────────────────────┐
     │                   Node.js Backend                                │
     │                    (server.js)                                   │
     │                                                                 │
     │  • Validates data (Joi)                                         │
     │  • Stores to Firebase                                           │
     └─────────────────────────────────┬───────────────────────────────┘
                                       │
                                       ▼
     ┌─────────────────────────────────────────────────────────────────┐
     │                   Firebase Firestore                             │
     │                      (Cloud)                                     │
     │                                                                 │
     │  Collections:                                                    │
     │  • /children                                                     │
     │  • /sessions                                                     │
     │  • /trials                                                       │
     │                                                                 │
     │  Benefits:                                                       │
     │  • Real-time sync                                                │
     │  • Backup                                                        │
     │  • Multi-device access                                           │
     │  • Export to CSV for ML                                          │
     └─────────────────────────────────────────────────────────────────┘
```

---

## 📋 Summary

This document provides the complete navigation and data flow structure of the SenseAI application, covering:

1. **App Startup** - Splash → Login/Register → Dashboard
2. **Main Dashboard** - Statistics, Quick Actions, Assessment Components
3. **Cognitive Module** - Add Child, View Children, Start Assessment
4. **Age-Based Assessment** - 2-3 (Questionnaire), 3.5-5 (Frog Jump), 5.5-6+ (DCCS)
5. **Game Flow** - Language → Instructions → Game → Reflection → Results
6. **Data Storage** - SQLite (Local) → API → Firebase (Cloud)

The system is designed for:
- **Offline-first** operation (works without internet)
- **Multilingual** support (English, Sinhala, Tamil)
- **Clinical workflow** integration
- **ML-ready** data collection

---

*Document generated: November 2025*

